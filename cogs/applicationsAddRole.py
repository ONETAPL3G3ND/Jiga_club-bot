from disnake.ext import commands
import disnake
import asyncio
import config

class applicationsAddRole(commands.Cog):
    def __init__(self, bot):
        self.bot = bot

    @commands.Cog.listener()
    async def on_raw_reaction_add(self, payload):
        channel: disnake.ChannelType = self.bot.get_channel(payload.channel_id)
        message = await channel.fetch_message(payload.message_id)
        emoji = payload.emoji.name
        guild = self.bot.get_guild(payload.guild_id)


        if channel.category.name == "–∑–∞—è–≤–∫–∏ –≤ –∫–ª—É–±":
            if payload.user_id in config.Admin_id:
                if emoji == "‚úÖ":
                    for member in channel.members:
                        if not member.bot:  # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —ç—Ç–æ –Ω–µ –±–æ—Ç
                            if len(member.roles) == 1:  # –ï—Å–ª–∏ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ—Ç —Ä–æ–ª–µ–π
                                role = guild.get_role(1186724019802738698)  # ID –≤–∞—à–µ–π —Ä–æ–ª–∏
                                if role:
                                    await member.add_roles(role)
                                    embed = disnake.Embed(color=0x2F3136)
                                    embed.set_author(name="–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–µ–º –≤–∞—Å!")
                                    embed.description = f'''‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨~‡Æú€©€û€©‡Æú~‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨
                                    <@{member.id}> –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–µ–º —Ç–µ–±—è –≤ –Ω–∞—à–µ–º –∫–ª—É–±–µ —Å –æ—Ç–∫—Ä—ã—Ç—ã–º–∏ –æ–±—ä—è—Ç–∏—è–º–∏! –ú—ã —Ä–∞–¥—ã –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –Ω–æ–≤—ã—Ö —á–ª–µ–Ω–æ–≤, –∏ —Ç—ã ‚Äî –≤–∞–∂–Ω–æ–µ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –∫ –Ω–∞—à–µ–π –∫–æ–º–∞–Ω–¥–µ.
    
    –¢—ã –∏–≥—Ä–∞–µ—à—å –∫–ª—é—á–µ–≤—É—é —Ä–æ–ª—å –≤ –Ω–∞—à–µ–º –∫–ª—É–±–µ. –¢–≤–æ—è —ç–Ω–µ—Ä–≥–∏—è –∏ —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –¥–µ–ª–∞—é—Ç —Ç–µ–±—è –Ω–µ–∑–∞–º–µ–Ω–∏–º—ã–º —É—á–∞—Å—Ç–Ω–∏–∫–æ–º. –ú—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ç—ã –æ—Ç–ª–∏—á–Ω–æ –≤–æ–π–¥–µ—à—å –≤ —Ä–æ–ª—å "{role.name}"
    
    –¢–≤–æ–µ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–∏–µ –∏ –≤–∫–ª–∞–¥ —Ü–µ–Ω–Ω—ã –¥–ª—è –Ω–∞—Å. –ú—ã –Ω–∞—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –ø—Ä–∏–≥–ª–∞—à–∞–µ–º —Ç–µ–±—è –ø—Ä–∏–Ω–∏–º–∞—Ç—å —É—á–∞—Å—Ç–∏–µ –≤ –Ω–∞—à–∏—Ö –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è—Ö –∏ –¥–∏—Å–∫—É—Å—Å–∏—è—Ö, –¥–µ–ª–∏—Ç—å—Å—è —Å–≤–æ–∏–º–∏ –∏–¥–µ—è–º–∏ –∏ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è–º–∏.
    
    –ù–µ —Å—Ç–µ—Å–Ω—è–π—Å—è –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ –ª—é–±–æ–º—É –∏–∑ –Ω–∞—Å —Å –≤–æ–ø—Ä–æ—Å–∞–º–∏ –∏–ª–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è–º–∏. –¢—ã –≤–∞–∂–µ–Ω –¥–ª—è –Ω–∞—Å, –∏ –º—ã —Ö–æ—Ç–∏–º, —á—Ç–æ–±—ã —Ç—ã –ø–æ—á—É–≤—Å—Ç–≤–æ–≤–∞–ª—Å—è –∫–∞–∫ –¥–æ–º–∞ –≤ –Ω–∞—à–µ–π –¥—Ä—É–∂–Ω–æ–π –∫–æ–º–∞–Ω–¥–µ.
    
    –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –Ω–∞—à –∫–ª—É–±! –ú—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ç—ã –ø—Ä–∏–Ω–µ—Å–µ—à—å –≤ –Ω–µ–≥–æ —Å–≤–µ–∂–∏–µ –∏–¥–µ–∏ –∏ —ç–Ω—Ç—É–∑–∏–∞–∑–º.
    '''
                                    await channel.send(embed=embed)
                elif emoji == "üöò":
                    for member in channel.members:
                        if not member.bot:  # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —ç—Ç–æ –Ω–µ –±–æ—Ç
                            if len(member.roles) == 1:  # –ï—Å–ª–∏ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ—Ç —Ä–æ–ª–µ–π
                                role = guild.get_role(1186723921098186873)  # ID –≤–∞—à–µ–π —Ä–æ–ª–∏
                                if role:
                                    await member.add_roles(role)
                                    embed = disnake.Embed(color=0x2F3136)
                                    embed.set_author(name="–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–µ–º –≤–∞—Å!")
                                    embed.description = f'''‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨~‡Æú€©€û€©‡Æú~‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨
                                    <@{member.id}> –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–µ–º —Ç–µ–±—è –≤ –Ω–∞—à–µ–º –∫–ª—É–±–µ —Å –æ—Ç–∫—Ä—ã—Ç—ã–º–∏ –æ–±—ä—è—Ç–∏—è–º–∏! –ú—ã —Ä–∞–¥—ã –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –Ω–æ–≤—ã—Ö —á–ª–µ–Ω–æ–≤, –∏ —Ç—ã ‚Äî –≤–∞–∂–Ω–æ–µ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –∫ –Ω–∞—à–µ–π –∫–æ–º–∞–Ω–¥–µ.
    
    –¢—ã –∏–≥—Ä–∞–µ—à—å –∫–ª—é—á–µ–≤—É—é —Ä–æ–ª—å –≤ –Ω–∞—à–µ–º –∫–ª—É–±–µ. –¢–≤–æ—è —ç–Ω–µ—Ä–≥–∏—è –∏ —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –¥–µ–ª–∞—é—Ç —Ç–µ–±—è –Ω–µ–∑–∞–º–µ–Ω–∏–º—ã–º —É—á–∞—Å—Ç–Ω–∏–∫–æ–º. –ú—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ç—ã –æ—Ç–ª–∏—á–Ω–æ –≤–æ–π–¥–µ—à—å –≤ —Ä–æ–ª—å "{role.name}"
    
    –¢–≤–æ–µ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–∏–µ –∏ –≤–∫–ª–∞–¥ —Ü–µ–Ω–Ω—ã –¥–ª—è –Ω–∞—Å. –ú—ã –Ω–∞—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –ø—Ä–∏–≥–ª–∞—à–∞–µ–º —Ç–µ–±—è –ø—Ä–∏–Ω–∏–º–∞—Ç—å —É—á–∞—Å—Ç–∏–µ –≤ –Ω–∞—à–∏—Ö –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è—Ö –∏ –¥–∏—Å–∫—É—Å—Å–∏—è—Ö, –¥–µ–ª–∏—Ç—å—Å—è —Å–≤–æ–∏–º–∏ –∏–¥–µ—è–º–∏ –∏ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è–º–∏.
    
    –ù–µ —Å—Ç–µ—Å–Ω—è–π—Å—è –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ –ª—é–±–æ–º—É –∏–∑ –Ω–∞—Å —Å –≤–æ–ø—Ä–æ—Å–∞–º–∏ –∏–ª–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è–º–∏. –¢—ã –≤–∞–∂–µ–Ω –¥–ª—è –Ω–∞—Å, –∏ –º—ã —Ö–æ—Ç–∏–º, —á—Ç–æ–±—ã —Ç—ã –ø–æ—á—É–≤—Å—Ç–≤–æ–≤–∞–ª—Å—è –∫–∞–∫ –¥–æ–º–∞ –≤ –Ω–∞—à–µ–π –¥—Ä—É–∂–Ω–æ–π –∫–æ–º–∞–Ω–¥–µ.
    
    –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –Ω–∞—à –∫–ª—É–±! –ú—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ç—ã –ø—Ä–∏–Ω–µ—Å–µ—à—å –≤ –Ω–µ–≥–æ —Å–≤–µ–∂–∏–µ –∏–¥–µ–∏ –∏ —ç–Ω—Ç—É–∑–∏–∞–∑–º.
    '''
                                    await channel.send(embed=embed)
                else:
                    print(emoji)


def setup(bot):
    bot.add_cog(applicationsAddRole(bot))